FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"LS0tCnZlcnNpb246IDEuMApuYW1lOiBoYWRvb3AtY2x1c3Rlci1hcGIKZGVzY3JpcHRpb246IEhh\
ZG9vcCBDbHVzdGVyIFNlcnZpY2UKYmluZGFibGU6IGZhbHNlCmFzeW5jOiBvcHRpb25hbAphbHBo\
YToKICBkYXNoYm9hcmRfcmVkaXJlY3Q6IHRydWUKbWV0YWRhdGE6CiAgZGlzcGxheU5hbWU6IEhh\
ZG9vcC1DbHVzdGVyIChBUEIpCiAgaW1hZ2VVcmw6IGh0dHBzOi8vMTAuOC4xOTguMTMyL3BpY3R1\
cmVzLzEucG5nCnBsYW5zOgotIG5hbWU6IHBsYXRpbnVtCiAgZGVzY3JpcHRpb246IFBsYXRpbnVt\
IFBsYW4KICBmcmVlOiBmYWxzZQogIG1ldGFkYXRhOgogICAgZGlzcGxheU5hbWU6IFRoaXMgaXMg\
dGhlIFBsYXRpbnVtIFBsYW4gLSA3IERhdGEgTm9kZXMsIDEgSm9iIFRyYWNrZXIKICAgIGxvbmdE\
ZXNjcmlwdGlvbjogVGhpcyBpcyB0aGUgUGxhdGludW0gUGxhbiAtIDcgRGF0YSBOb2RlcywgMSBK\
b2IgVHJhY2tlcgogICAgY29zdDogOS45OQogIHBhcmFtZXRlcnM6CiAgLSAmMQogICAgdGl0bGU6\
IENGTUUgUmVxdWVzdGVyCiAgICBuYW1lOiBjZm1lX3VzZXIKICAgIHR5cGU6IHN0cmluZwogICAg\
cmVxdWlyZWQ6IHRydWUKICAgIGRpc3BsYXlfZ3JvdXA6IENsb3VkRm9ybXMgQ3JlZGVudGlhbHMK\
ICAtICYyCiAgICB0aXRsZTogQ0ZNRSBQYXNzd29yZAogICAgbmFtZTogY2ZtZV9wYXNzd29yZAog\
ICAgdHlwZTogc3RyaW5nCiAgICBkaXNwbGF5X3R5cGU6IHBhc3N3b3JkCiAgICByZXF1aXJlZDog\
dHJ1ZQogICAgZGlzcGxheV9ncm91cDogQ2xvdWRGb3JtcyBDcmVkZW50aWFscwogIC0gJjMKICAg\
IG5hbWU6IHRleHRfYm94XzEKICAgIHRpdGxlOiBKb2IgVHJhY2tlciBOYW1lCiAgICBkZWZhdWx0\
OiBkZnMubmFtZW5vZGUubmFtZS5kaXIKICAgIGRpc3BsYXlfZ3JvdXA6IEluZm8vSm9iIFRyYWNr\
ZXIKICAgIHR5cGU6IHN0cmluZwogICAgcmVxdWlyZWQ6IGZhbHNlCiAgLSAmNAogICAgbmFtZTog\
Y2hlY2tfYm94XzEKICAgIHRpdGxlOiBVc2UgWUFSTgogICAgZGVmYXVsdDogdHJ1ZQogICAgZGlz\
cGxheV9ncm91cDogSW5mby9Kb2IgVHJhY2tlcgogICAgdHlwZTogYm9vbGVhbgogICAgcmVxdWly\
ZWQ6IGZhbHNlCiAgLSAmNQogICAgbmFtZTogdGV4dF9ib3hfMgogICAgdGl0bGU6IE5hbWUgUHJl\
Zml4CiAgICBkZWZhdWx0OiBkZnMuZGF0YW5vZGVbeF0uZGF0YS5kaXIKICAgIGRpc3BsYXlfZ3Jv\
dXA6IEluZm8vRGF0YSBOb2RlKHMpCiAgICB0eXBlOiBzdHJpbmcKICAgIHJlcXVpcmVkOiBmYWxz\
ZQogIC0gJjYKICAgIG5hbWU6IHRleHRfYm94XzMKICAgIHRpdGxlOiBSZXNvdXJjZSBNZW1vcnkg\
TUIKICAgIGRlZmF1bHQ6ICcxNTM2JwogICAgZGlzcGxheV9ncm91cDogSW5mby9EYXRhIE5vZGUo\
cykKICAgIHR5cGU6IHN0cmluZwogICAgcmVxdWlyZWQ6IGZhbHNlCiAgLSAmNwogICAgbmFtZTog\
dGV4dF9ib3hfNAogICAgdGl0bGU6IFNjaGVkdWxlciBNaW5pbXVtIEFsbG9jYXRpb24gTUIKICAg\
IGRlZmF1bHQ6ICcxMjgnCiAgICBkaXNwbGF5X2dyb3VwOiBJbmZvL0RhdGEgTm9kZShzKQogICAg\
dHlwZTogc3RyaW5nCiAgICByZXF1aXJlZDogZmFsc2UKICAtICY4CiAgICBuYW1lOiB0ZXh0X2Jv\
eF81XzEKICAgIHRpdGxlOiBTY2hlZHVsZXIgTWF4aW11bSBBbGxvY2F0aW9uIE1CCiAgICBkZWZh\
dWx0OiAnMTUzNicKICAgIGRpc3BsYXlfZ3JvdXA6IEluZm8vRGF0YSBOb2RlKHMpCiAgICB0eXBl\
OiBzdHJpbmcKICAgIHJlcXVpcmVkOiBmYWxzZQotIG5hbWU6IGdvbGQKICBkZXNjcmlwdGlvbjog\
R29sZCBQbGFuCiAgZnJlZTogZmFsc2UKICBtZXRhZGF0YToKICAgIGRpc3BsYXlOYW1lOiBUaGlz\
IGlzIHRoZSBHb2xkIFBsYW4gLSA1IERhdGEgTm9kZXMsIDEgSm9iIFRyYWNrZXIKICAgIGxvbmdE\
ZXNjcmlwdGlvbjogVGhpcyBpcyB0aGUgR29sZCBQbGFuIC0gNSBEYXRhIE5vZGVzLCAxIEpvYiBU\
cmFja2VyCiAgICBjb3N0OiA1Ljk5CiAgcGFyYW1ldGVyczoKICAtICoxCiAgLSAqMgogIC0gKjMK\
ICAtICo0CiAgLSAqNQogIC0gKjYKICAtICo3CiAgLSAqOAotIG5hbWU6IHNpbHZlcgogIGRlc2Ny\
aXB0aW9uOiBTaWx2ZXIgUGxhbgogIGZyZWU6IGZhbHNlCiAgbWV0YWRhdGE6CiAgICBkaXNwbGF5\
TmFtZTogVGhpcyBpcyB0aGUgU2lsdmVyIFBsYW4gLSAzIERhdGEgTm9kZXMsIDEgSm9iIFRyYWNr\
ZXIKICAgIGxvbmdEZXNjcmlwdGlvbjogVGhpcyBpcyB0aGUgU2lsdmVyIFBsYW4gLSAzIERhdGEg\
Tm9kZXMsIDEgSm9iIFRyYWNrZXIKICAgIGNvc3Q6IDEuOTkKICBwYXJhbWV0ZXJzOgogIC0gKjEK\
ICAtICoyCiAgLSAqMwogIC0gKjQKICAtICo1CiAgLSAqNgogIC0gKjcKICAtICo4Ci0gbmFtZTog\
Y3VzdG9tCiAgZGVzY3JpcHRpb246IEN1c3RvbSBQbGFuCiAgZnJlZTogZmFsc2UKICBtZXRhZGF0\
YToKICAgIGRpc3BsYXlOYW1lOiBUaGlzIGlzIHRoZSBDdXN0b20gUGxhbgogICAgbG9uZ0Rlc2Ny\
aXB0aW9uOiBUaGlzIGlzIHRoZSBDdXN0b20gUGxhbgogICAgY29zdDogNTAuMAogIHBhcmFtZXRl\
cnM6CiAgLSAqMQogIC0gKjIKICAtICozCiAgLSAqNAogIC0gbmFtZTogb3B0aW9uXzBfbnVtYmVy\
X29mX3ZtcwogICAgdGl0bGU6IERhdGEgTm9kZSBDb3VudAogICAgZGVmYXVsdDogMwogICAgZGlz\
cGxheV9ncm91cDogSW5mby9EYXRhIE5vZGUocykKICAgIHR5cGU6IGVudW0KICAgIHJlcXVpcmVk\
OiBmYWxzZQogICAgZW51bToKICAgIC0gIjxOb25lPiIKICAgIC0gJzEnCiAgICAtICcyJwogICAg\
LSAnMycKICAgIC0gJzQnCiAgICAtICc1JwogICAgLSAnNicKICAgIC0gJzcnCiAgICAtICc4Jwog\
IC0gKjUKICAtICo2CiAgLSAqNwogIC0gKjgK"

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
