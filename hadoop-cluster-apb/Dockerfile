FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"LS0tCnZlcnNpb246IDEuMApuYW1lOiBoYWRvb3AtY2x1c3Rlci1hcGIKZGVzY3JpcHRpb246IEhh\
ZG9vcCBDbHVzdGVyIFNlcnZpY2UKYmluZGFibGU6IGZhbHNlCmFzeW5jOiBvcHRpb25hbAphbHBo\
YToKICBkYXNoYm9hcmRfcmVkaXJlY3Q6IHRydWUKbWV0YWRhdGE6CiAgZGlzcGxheU5hbWU6IEhh\
ZG9vcC1DbHVzdGVyIChBUEIpCiAgaW1hZ2VVcmw6IGh0dHBzOi8vMTAuOC45OS4xNDIvcGljdHVy\
ZXMvMS5wbmcKcGxhbnM6Ci0gbmFtZTogcGxhdGludW0KICBkZXNjcmlwdGlvbjogUGxhdGludW0g\
UGxhbgogIGZyZWU6IGZhbHNlCiAgbWV0YWRhdGE6CiAgICBkaXNwbGF5TmFtZTogVGhpcyBpcyB0\
aGUgUGxhdGludW0gUGxhbiAtIDcgRGF0YSBOb2RlcywgMSBKb2IgVHJhY2tlcgogICAgbG9uZ0Rl\
c2NyaXB0aW9uOiBUaGlzIGlzIHRoZSBQbGF0aW51bSBQbGFuIC0gNyBEYXRhIE5vZGVzLCAxIEpv\
YiBUcmFja2VyCiAgICBjb3N0OiA5Ljk5CiAgcGFyYW1ldGVyczoKICAtICYxCiAgICB0aXRsZTog\
Q0ZNRSBSZXF1ZXN0ZXIKICAgIG5hbWU6IGNmbWVfdXNlcgogICAgdHlwZTogc3RyaW5nCiAgICBy\
ZXF1aXJlZDogdHJ1ZQogICAgZGlzcGxheV9ncm91cDogQ2xvdWRGb3JtcyBDcmVkZW50aWFscwog\
IC0gJjIKICAgIHRpdGxlOiBDRk1FIFBhc3N3b3JkCiAgICBuYW1lOiBjZm1lX3Bhc3N3b3JkCiAg\
ICB0eXBlOiBzdHJpbmcKICAgIGRpc3BsYXlfdHlwZTogcGFzc3dvcmQKICAgIHJlcXVpcmVkOiB0\
cnVlCiAgICBkaXNwbGF5X2dyb3VwOiBDbG91ZEZvcm1zIENyZWRlbnRpYWxzCiAgLSAmMwogICAg\
bmFtZTogdGV4dF9ib3hfMQogICAgdGl0bGU6IEpvYiBUcmFja2VyIE5hbWUKICAgIGRlZmF1bHQ6\
IGRmcy5uYW1lbm9kZS5uYW1lLmRpcgogICAgZGlzcGxheV9ncm91cDogSW5mby9Kb2IgVHJhY2tl\
cgogICAgdHlwZTogc3RyaW5nCiAgICByZXF1aXJlZDogZmFsc2UKICAtICY0CiAgICBuYW1lOiBj\
aGVja19ib3hfMQogICAgdGl0bGU6IFVzZSBZQVJOCiAgICBkZWZhdWx0OiB0cnVlCiAgICBkaXNw\
bGF5X2dyb3VwOiBJbmZvL0pvYiBUcmFja2VyCiAgICB0eXBlOiBib29sZWFuCiAgICByZXF1aXJl\
ZDogZmFsc2UKICAtICY1CiAgICBuYW1lOiB0ZXh0X2JveF8yCiAgICB0aXRsZTogTmFtZSBQcmVm\
aXgKICAgIGRlZmF1bHQ6IGRmcy5kYXRhbm9kZVt4XS5kYXRhLmRpcgogICAgZGlzcGxheV9ncm91\
cDogSW5mby9EYXRhIE5vZGUocykKICAgIHR5cGU6IHN0cmluZwogICAgcmVxdWlyZWQ6IGZhbHNl\
CiAgLSAmNgogICAgbmFtZTogdGV4dF9ib3hfMwogICAgdGl0bGU6IFJlc291cmNlIE1lbW9yeSBN\
QgogICAgZGVmYXVsdDogJzE1MzYnCiAgICBkaXNwbGF5X2dyb3VwOiBJbmZvL0RhdGEgTm9kZShz\
KQogICAgdHlwZTogc3RyaW5nCiAgICByZXF1aXJlZDogZmFsc2UKICAtICY3CiAgICBuYW1lOiB0\
ZXh0X2JveF80CiAgICB0aXRsZTogU2NoZWR1bGVyIE1pbmltdW0gQWxsb2NhdGlvbiBNQgogICAg\
ZGVmYXVsdDogJzEyOCcKICAgIGRpc3BsYXlfZ3JvdXA6IEluZm8vRGF0YSBOb2RlKHMpCiAgICB0\
eXBlOiBzdHJpbmcKICAgIHJlcXVpcmVkOiBmYWxzZQogIC0gJjgKICAgIG5hbWU6IHRleHRfYm94\
XzVfMQogICAgdGl0bGU6IFNjaGVkdWxlciBNYXhpbXVtIEFsbG9jYXRpb24gTUIKICAgIGRlZmF1\
bHQ6ICcxNTM2JwogICAgZGlzcGxheV9ncm91cDogSW5mby9EYXRhIE5vZGUocykKICAgIHR5cGU6\
IHN0cmluZwogICAgcmVxdWlyZWQ6IGZhbHNlCi0gbmFtZTogZ29sZAogIGRlc2NyaXB0aW9uOiBH\
b2xkIFBsYW4KICBmcmVlOiBmYWxzZQogIG1ldGFkYXRhOgogICAgZGlzcGxheU5hbWU6IFRoaXMg\
aXMgdGhlIEdvbGQgUGxhbiAtIDUgRGF0YSBOb2RlcywgMSBKb2IgVHJhY2tlcgogICAgbG9uZ0Rl\
c2NyaXB0aW9uOiBUaGlzIGlzIHRoZSBHb2xkIFBsYW4gLSA1IERhdGEgTm9kZXMsIDEgSm9iIFRy\
YWNrZXIKICAgIGNvc3Q6IDUuOTkKICBwYXJhbWV0ZXJzOgogIC0gKjEKICAtICoyCiAgLSAqMwog\
IC0gKjQKICAtICo1CiAgLSAqNgogIC0gKjcKICAtICo4Ci0gbmFtZTogc2lsdmVyCiAgZGVzY3Jp\
cHRpb246IFNpbHZlciBQbGFuCiAgZnJlZTogZmFsc2UKICBtZXRhZGF0YToKICAgIGRpc3BsYXlO\
YW1lOiBUaGlzIGlzIHRoZSBTaWx2ZXIgUGxhbiAtIDMgRGF0YSBOb2RlcywgMSBKb2IgVHJhY2tl\
cgogICAgbG9uZ0Rlc2NyaXB0aW9uOiBUaGlzIGlzIHRoZSBTaWx2ZXIgUGxhbiAtIDMgRGF0YSBO\
b2RlcywgMSBKb2IgVHJhY2tlcgogICAgY29zdDogMS45OQogIHBhcmFtZXRlcnM6CiAgLSAqMQog\
IC0gKjIKICAtICozCiAgLSAqNAogIC0gKjUKICAtICo2CiAgLSAqNwogIC0gKjgKLSBuYW1lOiBj\
dXN0b20KICBkZXNjcmlwdGlvbjogQ3VzdG9tIFBsYW4KICBmcmVlOiBmYWxzZQogIG1ldGFkYXRh\
OgogICAgZGlzcGxheU5hbWU6IFRoaXMgaXMgdGhlIEN1c3RvbSBQbGFuCiAgICBsb25nRGVzY3Jp\
cHRpb246IFRoaXMgaXMgdGhlIEN1c3RvbSBQbGFuCiAgICBjb3N0OiA1MC4wCiAgcGFyYW1ldGVy\
czoKICAtICoxCiAgLSAqMgogIC0gKjMKICAtICo0CiAgLSBuYW1lOiBvcHRpb25fMF9udW1iZXJf\
b2Zfdm1zCiAgICB0aXRsZTogRGF0YSBOb2RlIENvdW50CiAgICBkZWZhdWx0OiAzCiAgICBkaXNw\
bGF5X2dyb3VwOiBJbmZvL0RhdGEgTm9kZShzKQogICAgdHlwZTogZW51bQogICAgcmVxdWlyZWQ6\
IGZhbHNlCiAgICBlbnVtOgogICAgLSAiPE5vbmU+IgogICAgLSAnMScKICAgIC0gJzInCiAgICAt\
ICczJwogICAgLSAnNCcKICAgIC0gJzUnCiAgICAtICc2JwogICAgLSAnNycKICAgIC0gJzgnCiAg\
LSAqNQogIC0gKjYKICAtICo3CiAgLSAqOAo="

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
