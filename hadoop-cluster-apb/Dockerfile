FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"LS0tCnZlcnNpb246IDEuMApuYW1lOiBoYWRvb3AtY2x1c3Rlci1hcGIKZGVzY3JpcHRpb246IEhh\
ZG9vcCBDbHVzdGVyIFNlcnZpY2UKYmluZGFibGU6IGZhbHNlCmFzeW5jOiBvcHRpb25hbAphbHBo\
YToKICBkYXNoYm9hcmRfcmVkaXJlY3Q6IHRydWUKbWV0YWRhdGE6CiAgZGlzcGxheU5hbWU6IEhh\
ZG9vcC1DbHVzdGVyIChBUEIpCiAgaW1hZ2VVcmw6IGh0dHBzOi8vMTAuOC4xOTguMTMyL3BpY3R1\
cmVzLzEucG5nCnBsYW5zOgotIG5hbWU6IHBsYXRpbnVtCiAgZGVzY3JpcHRpb246IFBsYXRpbnVt\
IFBsYW4KICBmcmVlOiBmYWxzZQogIG1ldGFkYXRhOgogICAgZGlzcGxheU5hbWU6IFRoaXMgaXMg\
dGhlIFBsYXRpbnVtIFBsYW4gLSA3IERhdGEgTm9kZXMsIDEgSm9iIFRyYWNrZXIKICAgIGxvbmdE\
ZXNjcmlwdGlvbjogVGhpcyBpcyB0aGUgUGxhdGludW0gUGxhbiAtIDcgRGF0YSBOb2RlcywgMSBK\
b2IgVHJhY2tlcgogICAgY29zdDogOS45OQogIHBhcmFtZXRlcnM6CiAgLSAmMQogICAgbmFtZTog\
dGV4dF9ib3hfMQogICAgdGl0bGU6IEpvYiBUcmFja2VyIE5hbWUKICAgIGRlZmF1bHQ6IGRmcy5u\
YW1lbm9kZS5uYW1lLmRpcgogICAgZGlzcGxheV9ncm91cDogSW5mby9Kb2IgVHJhY2tlcgogICAg\
dHlwZTogc3RyaW5nCiAgICByZXF1aXJlZDogZmFsc2UKICAtICYyCiAgICBuYW1lOiBjaGVja19i\
b3hfMQogICAgdGl0bGU6IFVzZSBZQVJOCiAgICBkZWZhdWx0OiB0cnVlCiAgICBkaXNwbGF5X2dy\
b3VwOiBJbmZvL0pvYiBUcmFja2VyCiAgICB0eXBlOiBib29sZWFuCiAgICByZXF1aXJlZDogZmFs\
c2UKICAtICYzCiAgICBuYW1lOiB0ZXh0X2JveF8yCiAgICB0aXRsZTogTmFtZSBQcmVmaXgKICAg\
IGRlZmF1bHQ6IGRmcy5kYXRhbm9kZVt4XS5kYXRhLmRpcgogICAgZGlzcGxheV9ncm91cDogSW5m\
by9EYXRhIE5vZGUocykKICAgIHR5cGU6IHN0cmluZwogICAgcmVxdWlyZWQ6IGZhbHNlCiAgLSAm\
NAogICAgbmFtZTogdGV4dF9ib3hfMwogICAgdGl0bGU6IFJlc291cmNlIE1lbW9yeSBNQgogICAg\
ZGVmYXVsdDogJzE1MzYnCiAgICBkaXNwbGF5X2dyb3VwOiBJbmZvL0RhdGEgTm9kZShzKQogICAg\
dHlwZTogc3RyaW5nCiAgICByZXF1aXJlZDogZmFsc2UKICAtICY1CiAgICBuYW1lOiB0ZXh0X2Jv\
eF80CiAgICB0aXRsZTogU2NoZWR1bGVyIE1pbmltdW0gQWxsb2NhdGlvbiBNQgogICAgZGVmYXVs\
dDogJzEyOCcKICAgIGRpc3BsYXlfZ3JvdXA6IEluZm8vRGF0YSBOb2RlKHMpCiAgICB0eXBlOiBz\
dHJpbmcKICAgIHJlcXVpcmVkOiBmYWxzZQogIC0gJjYKICAgIG5hbWU6IHRleHRfYm94XzVfMQog\
ICAgdGl0bGU6IFNjaGVkdWxlciBNYXhpbXVtIEFsbG9jYXRpb24gTUIKICAgIGRlZmF1bHQ6ICcx\
NTM2JwogICAgZGlzcGxheV9ncm91cDogSW5mby9EYXRhIE5vZGUocykKICAgIHR5cGU6IHN0cmlu\
ZwogICAgcmVxdWlyZWQ6IGZhbHNlCi0gbmFtZTogZ29sZAogIGRlc2NyaXB0aW9uOiBHb2xkIFBs\
YW4KICBmcmVlOiBmYWxzZQogIG1ldGFkYXRhOgogICAgZGlzcGxheU5hbWU6IFRoaXMgaXMgdGhl\
IEdvbGQgUGxhbiAtIDUgRGF0YSBOb2RlcywgMSBKb2IgVHJhY2tlcgogICAgbG9uZ0Rlc2NyaXB0\
aW9uOiBUaGlzIGlzIHRoZSBHb2xkIFBsYW4gLSA1IERhdGEgTm9kZXMsIDEgSm9iIFRyYWNrZXIK\
ICAgIGNvc3Q6IDUuOTkKICBwYXJhbWV0ZXJzOgogIC0gKjEKICAtICoyCiAgLSAqMwogIC0gKjQK\
ICAtICo1CiAgLSAqNgotIG5hbWU6IHNpbHZlcgogIGRlc2NyaXB0aW9uOiBTaWx2ZXIgUGxhbgog\
IGZyZWU6IGZhbHNlCiAgbWV0YWRhdGE6CiAgICBkaXNwbGF5TmFtZTogVGhpcyBpcyB0aGUgU2ls\
dmVyIFBsYW4gLSAzIERhdGEgTm9kZXMsIDEgSm9iIFRyYWNrZXIKICAgIGxvbmdEZXNjcmlwdGlv\
bjogVGhpcyBpcyB0aGUgU2lsdmVyIFBsYW4gLSAzIERhdGEgTm9kZXMsIDEgSm9iIFRyYWNrZXIK\
ICAgIGNvc3Q6IDEuOTkKICBwYXJhbWV0ZXJzOgogIC0gKjEKICAtICoyCiAgLSAqMwogIC0gKjQK\
ICAtICo1CiAgLSAqNgotIG5hbWU6IGN1c3RvbQogIGRlc2NyaXB0aW9uOiBDdXN0b20gUGxhbgog\
IGZyZWU6IGZhbHNlCiAgbWV0YWRhdGE6CiAgICBkaXNwbGF5TmFtZTogVGhpcyBpcyB0aGUgQ3Vz\
dG9tIFBsYW4KICAgIGxvbmdEZXNjcmlwdGlvbjogVGhpcyBpcyB0aGUgQ3VzdG9tIFBsYW4KICAg\
IGNvc3Q6IDUwLjAKICBwYXJhbWV0ZXJzOgogIC0gKjEKICAtICoyCiAgLSBuYW1lOiBvcHRpb25f\
MF9udW1iZXJfb2Zfdm1zCiAgICB0aXRsZTogRGF0YSBOb2RlIENvdW50CiAgICBkZWZhdWx0OiAz\
CiAgICBkaXNwbGF5X2dyb3VwOiBJbmZvL0RhdGEgTm9kZShzKQogICAgdHlwZTogZW51bQogICAg\
cmVxdWlyZWQ6IGZhbHNlCiAgICBlbnVtOgogICAgLSAiPE5vbmU+IgogICAgLSAnMScKICAgIC0g\
JzInCiAgICAtICczJwogICAgLSAnNCcKICAgIC0gJzUnCiAgICAtICc2JwogICAgLSAnNycKICAg\
IC0gJzgnCiAgLSAqMwogIC0gKjQKICAtICo1CiAgLSAqNgo="

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
