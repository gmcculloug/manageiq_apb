FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"LS0tCnZlcnNpb246IDEuMApuYW1lOiBsYW1wLXN0YWNrLWFwYgpkZXNjcmlwdGlvbjogTEFNUCBT\
dGFjayBTZXJ2aWNlCmJpbmRhYmxlOiBmYWxzZQphc3luYzogb3B0aW9uYWwKYWxwaGE6CiAgZGFz\
aGJvYXJkX3JlZGlyZWN0OiB0cnVlCm1ldGFkYXRhOgogIGRpc3BsYXlOYW1lOiBMQU1QLVN0YWNr\
IChBUEIpCiAgaW1hZ2VVcmw6IGh0dHBzOi8vMTAuOC4xOTguMTMyL3BpY3R1cmVzLzIucG5nCnBs\
YW5zOgotIG5hbWU6IGRlZmF1bHQKICBkZXNjcmlwdGlvbjogVGhpcyBpcyBhIHNhbXBsZSBwbGFu\
CiAgZnJlZTogZmFsc2UKICBtZXRhZGF0YToKICAgIGRpc3BsYXlOYW1lOiBkZWZhdWx0CiAgICBs\
b25nRGVzY3JpcHRpb246IFRoaXMgaXMgYSBzYW1wbGUgcGxhbgogICAgY29zdDogMC4wCiAgcGFy\
YW1ldGVyczoKICAtIG5hbWU6IHRleHRfYm94XzEKICAgIHRpdGxlOiBEYXRhYmFzZSBVc2VybmFt\
ZQogICAgZGVmYXVsdDogbXlzcWxhZG1pbgogICAgZGlzcGxheV9ncm91cDogSW5mby9EYXRhYmFz\
ZQogICAgdHlwZTogc3RyaW5nCiAgICByZXF1aXJlZDogZmFsc2UKICAtIG5hbWU6IHRleHRfYm94\
XzIKICAgIHRpdGxlOiBEYXRhYmFzZSBQYXNzd29yZAogICAgZGVmYXVsdDogc21hcnR2bQogICAg\
ZGlzcGxheV9ncm91cDogSW5mby9EYXRhYmFzZQogICAgdHlwZTogc3RyaW5nCiAgICByZXF1aXJl\
ZDogZmFsc2UKICAgIGRpc3BsYXlfdHlwZTogcGFzc3dvcmQKICAtIG5hbWU6IHRleHRfYm94XzMK\
ICAgIHRpdGxlOiBOYW1lCiAgICBkZWZhdWx0OiBXZWJfU2VydmVyXzEKICAgIGRpc3BsYXlfZ3Jv\
dXA6IEluZm8vV2ViIFNlcnZlcgogICAgdHlwZTogc3RyaW5nCiAgICByZXF1aXJlZDogZmFsc2UK\
ICAtIG5hbWU6IGNoZWNrX2JveF8xXzEKICAgIHRpdGxlOiBQSFAKICAgIGRlZmF1bHQ6IHRydWUK\
ICAgIGRpc3BsYXlfZ3JvdXA6IEluZm8vV2ViIFNlcnZlcgogICAgdHlwZTogYm9vbGVhbgogICAg\
cmVxdWlyZWQ6IGZhbHNlCiAgLSBuYW1lOiBjaGVja19ib3hfMQogICAgdGl0bGU6IFNTTAogICAg\
ZGVmYXVsdDogdHJ1ZQogICAgZGlzcGxheV9ncm91cDogSW5mby9XZWIgU2VydmVyCiAgICB0eXBl\
OiBib29sZWFuCiAgICByZXF1aXJlZDogZmFsc2UKICAtIG5hbWU6IHRleHRfYm94XzQKICAgIHRp\
dGxlOiBMaXN0ZW4gQWRkcmVzcwogICAgZGVmYXVsdDogMC4wLjAuMDo4MAogICAgZGlzcGxheV9n\
cm91cDogSW5mby9XZWIgU2VydmVyCiAgICB0eXBlOiBzdHJpbmcKICAgIHJlcXVpcmVkOiBmYWxz\
ZQo="



COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
